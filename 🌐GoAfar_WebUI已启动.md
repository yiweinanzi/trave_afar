# 🌐 GoAfar Web UI 已成功启动！

## ✅ 访问信息

**本地访问地址**: http://localhost:7861

**公网访问地址**: Gradio自动生成的链接会在启动时显示，格式为：
```
https://xxxxxxxxxxxxxxxx.gradio.live
```

**查看公网链接方法**:
```bash
# 方法1: 查看进程输出（推荐）
ps aux | grep "python app.py" | head -1

# 方法2: 直接访问本地地址，Gradio会重定向
# 打开浏览器访问 http://localhost:7861
```

## 🎯 Web UI 功能说明

### Tab 1: 🎯 完整路线推荐
**功能**: 端到端的智能路线推荐
- 输入旅游需求（支持自然语言）
- 自动意图理解
- 多路召回（BGE-M3 + RecBole）
- LLM重排序
- VRPTW路线规划
- 自动生成文案

**输入示例**:
```
想去新疆喀纳斯看3天秋天的景色，拍照
西藏拉萨布达拉宫和纳木错，深度游  
云南大理洱海骑行，轻松休闲
四川九寨沟黄龙，亲子游不要太累
```

**输出内容**:
1. 意图理解结果（省份、天数、兴趣点...）
2. 召回结果（Top 10候选景点）
3. 规划状态（时间矩阵、求解过程）
4. 完整路线（标题、描述、详细行程）
5. 统计信息（景点数、时长、可行性）

### Tab 2: 🔍 语义检索
**功能**: 快速测试BGE-M3语义检索
- 输入关键词或查询
- 实时返回相关景点
- 显示相似度分数

**输入示例**:
```
想去看雪山
新疆的草原
西藏的寺庙
云南古城
```

**输出**: Top 10相关景点及详情

### Tab 3: ℹ️ 系统信息
**内容**:
- 数据统计（1333景点分布）
- 性能指标
- 技术栈
- 项目文档链接

## ⚙️ 参数说明

| 参数 | 说明 | 建议值 |
|------|------|--------|
| 目标省份 | 自动识别或手动选择 | 自动识别 |
| 最大行程时长 | 单日游玩时长（小时） | 8-10小时 |
| 候选POI数量 | 参与路线规划的景点数 | 15-25个 |
| 启用智能重排序 | 基于意图优化排序 | 建议开启 |

## 🎬 使用流程

### 步骤1: 访问Web UI
```
打开浏览器 → 访问 http://localhost:7861
或者使用公网链接（可在任何地方访问）
```

### 步骤2: 输入需求
```
在"旅游需求"框中输入，例如：
"想去新疆喀纳斯看秋天的景色，拍照"
```

### 步骤3: 调整参数
```
- 省份：保持"自动识别"
- 时长：10小时
- 候选数：20个
- 重排序：✓ 开启
```

### 步骤4: 点击推荐
```
点击"🚀 开始推荐"按钮
等待3-30秒（取决于候选数量）
```

### 步骤5: 查看结果
```
- 意图理解：AI提取的关键信息
- 召回结果：Top 10候选景点
- 推荐路线：完整的行程安排
- 统计信息：可行性验证
```

## ⚡ 性能提示

- 首次推荐：3-30秒（需要加载模型）
- 后续推荐：更快（模型已缓存）
- 仅语义检索：<1秒（最快）
- LLM重排序：+2-3秒
- VRPTW规划：1-5秒（取决于候选数）

## ⚠️ 注意事项

1. **首次使用**: 如果提示"向量未生成"，请先运行：
   ```bash
   python src/embedding/build_embeddings_gpu.py
   ```

2. **候选数量**: 建议15-25个，太多会增加求解时间

3. **公网链接**: 
   - 自动生成，72小时有效
   - 可以分享给其他人测试
   - 首次访问可能需要等待几秒

4. **性能**: 
   - 本地访问最快
   - 公网访问受网络影响

## 🎨 界面预览

```
┌─────────────────────────────────────────────────────┐
│  🎒 GoAfar 智能旅行路线推荐系统                      │
│  基于 BGE-M3 / RecBole / OR-Tools / Qwen3          │
├─────────────────────────────────────────────────────┤
│  📑 Tab: 🎯 完整路线推荐                            │
│                                                      │
│  旅游需求: [想去新疆喀纳斯看秋天的景色，拍照]       │
│  目标省份: [自动识别 ▼]  时长: [10h ━━●━━━]       │
│  候选数量: [20 ━━●━━━]   重排序: [✓]              │
│                                                      │
│  [🚀 开始推荐]                                      │
│                                                      │
│  结果：                                              │
│  - 意图理解 ✓                                       │
│  - 召回结果（10个景点）                             │
│  - 路线规划 ✓                                       │
│  - 推荐文案                                         │
└─────────────────────────────────────────────────────┘
```

## 📊 测试建议

### 快速测试（Tab 2）
```
1. 切换到"🔍 语义检索" Tab
2. 输入："湖"
3. 点击搜索
4. 查看相关湖泊景点
```

### 完整测试（Tab 1）
```
1. 使用"🎯 完整路线推荐" Tab
2. 输入："想去新疆看雪山"
3. 设置候选数量：20
4. 点击"开始推荐"
5. 等待3-10秒
6. 查看完整推荐结果
```

---

**Web UI状态**: ✅ 运行中（端口7861）  
**本地访问**: http://localhost:7861  
**公网链接**: 启动后自动生成

**提示**: 公网链接会在Web UI启动完成后显示在终端输出中！

**GitHub**: https://github.com/yiweinanzi/trave_afar
